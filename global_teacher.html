<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AIESEC Italia</title>
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicon//apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon//favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon//favicon-16x16.png">
    <link rel="manifest" href="assets/img/favicon//site.webmanifest">
    <link rel="mask-icon" href="assets/img/favicon//safari-pinned-tab.svg" color="#037ef3">
    <meta name="msapplication-TileColor" content="#037ef3">
    <meta name="theme-color" content="#037ef3">
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/vendors/odometer/odometer.min.css" />
    <link rel=preload href=assets/vendors/fontawesome/css/all.min.css as=style
    onload="this.onload=null;this.rel='stylesheet'">
    <noscript
      ><link rel=stylesheet
      href=assets/vendors/fontawesome/css/all.min.css></noscript
    >
  </head>
  <body>
    <header>
      <nav class="navbar">
        <a href="/"><img class="logo" src="assets/img/White-Blue-Logo.png" alt=""></a>
        <ul>
          <li>
            <a style="text-decoration: none;padding: 0 1.5rem;text-transform: uppercase;font-weight: 700;font-size: 17px;color: white;" href="/">Home</a>
          </li>
          <li >
            <div class="programs-list" >
              <div class="dropdown-head" style="color: white;font-weight: 700;font-size: 17px;" href="">Our Programs</div>
              <div class="dropdown">
                <ul class="dropdown-list">
                  <li><a href="global_volunteer.html">Volunteer Abroad</a></li>
                  <li><a href="global_talent.html">Intern Abroad</a></li>
                  <li><a href="global_teacher.html">Teach Abroad</a></li>
                </ul>
              </div>
              <!-- <i class="fa fa-angle-down"></i> -->
            </div>
          </li>
        </ul>
        <div class="hamburger">
          <button>
            <div class="bar"></div>
          </button>
        </div>
      </nav>
      <section class="signup_hero">
          <picture style="width: 100%">
            <source
              media="(max-width: 786px)"
              srcset="assets/img/products/ogte_mobile.webp"
            />
            <source
              media="(min-width: 787px)"
              srcset="assets/img/products/ogte.webp"
            />
            <img
              src="assets/img/products/ogte.webp"
              alt=""
              width="100%"
            />
          </picture>
        </section>
      </section> 
    </header>
    <main>
      <section class="intro container">
        <div class="product-intro container">
          <div class="product-content">
            <img src="assets/img/products/GTE HORIZONTAL COLOR.webp" alt="">
            <p>
              Global Teacher is a global teaching internship opportunity for young people (age 18-30) who seek to develop themselves and their career by engaging with a professional teaching experience.
            </p>
          </div>
          <div class="product-details">
            <div class="left">
              <p class="left-header">DURATION</p>
              <p>9-78 Weeks</p>
            </div>
            <div class="right">
              <p class="right-header" >ORGANIZATION</p>
              <p>Educational Institutions</p>
            </div>
          </div>
          <div class="product-value">
            <div class="value-box" style="background: var(--gte)">
              <p class="value-header" style="font-size: 43px;">Global Opportunity</p>
              <p class="value-content">Expand your horizon by developing your career in a global setting. Work in a whole new
environment and culture, while adapting to a local life in another country.</p>
            </div>
            <div class="value-box">
              <p class="value-header" style="font-size: 43px;">Develop Yourself</p>
              <p class="value-content">Grow and develop develop your leadership competencies and personal skills by going
through practical experiences and learning-by-doing.</p>
            </div>
            <div class="value-box" style="background: var(--gte)">
              <p class="value-header" style="font-size: 43px;">Boost your career</p>
              <p class="value-content">Launch yourself into a challenging role that allows you to gain a professional edge with our
partners who are dedicated to provide an enriching experience.</p>
            </div>
          </div>
        </div>
      </section>

      <div class="tapes">
        <marquee behavior="scroll" direction="left" scrollamount="10" loop="10" style="background-color: var(--gte);"> LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP
          LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP
          LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP
          LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP
          LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP</marquee>
        <marquee behavior="scroll" direction="right" scrollamount="10" loop="10" style="background-color: var(--gte);"> LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP
        LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP
        LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP
        LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP
        LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP LEADERSHIP</marquee>
      </div>

      <section class="counter-one">
        <div class="container" style="padding-bottom: 0">
          <div class="counter-one__inner">
            <ul class="list-unstyled counter-one__list">
              <li class="counter-one__single">
                <div class="counter-one__count-box">
                  <h3 class="odometer" data-count="100">00</h3>
                  <span class="counter-one__letter">+</span>
                </div>
                <div class="analysis-text-line">
                  <p class="counter-one__text">Volunteers on exchange now</p>
                  <img class="gv-analysis-line-one" src="assets/img/lines/2gte.png" alt="" style="top: 106%;
  width: 223px;
  height: 77px;">
                </div>
                
              </li>
              <li class="counter-one__single">
                <div class="counter-one__count-box">
                  <h3 class="odometer" data-count="400">00</h3>
                  <span class="counter-one__letter">+</span>
                </div>
                <div class="analysis-text-line">
                  <p class="counter-one__text">
                  Volunteers in the last year
<span style="color: transparent">x</span>
                  </p>
                  <img class="gv-analysis-line-two" src="assets/img/lines/2gtee.png" alt="" style="top: 115%;
  width: 223px;
  height: 79px;
  transform: translate(-50%, -77%) rotate(360deg);">
                  
                </div>
              </li>
            </ul>
          </div>
        </div>
      </section>

      


      <section id="gv-signup" class="signup-gv container" data-bg-color="var(--gte)">
        <h2>AIESEC will always be accompanying you <br>before, during and after the process</h2>
        <div class="product-value">
            <div class="value-box" style="background-color: transparent; width: 530px;">
              <div class="header-value-container">
                <p class="value-header-gv">1- Sign up below</p>
                <img src="assets/img/Icon_GV08.webp" alt="">
              </div>
              
              <p class="value-content" style="    text-align: center;">one of our local volunteers will contact you. You will have access to the platform of projects around the world.</p>
            </div>
            <div class="value-box" style="background-color: transparent; width: 530px;">
              <div class="header-value-container">
                <p class="value-header-gv">2- Apply to the project</p>
                <img src="assets/img/Icon_GV09.webp" alt="">
              </div>
              <p class="value-content" style="    text-align: center;">and carry out your interview with the advisor of the destination country, Once accepted, start packing your bags.</p>
            </div>
          </div>
          <form id="ogv_signup_form" action="javascript:void(0);" style="margin-top: 80px;">
						<div class="column-row" style="margin-top: 0px;">
              <input id="first_name_field" type="text" name="name" placeholder="First Name">
              <input id="last_name_field" type="text" name="name" placeholder="Last Name">
						</div>
            <div class="column-row" style="margin-top: 0px;">
              <input id="email_signup_field" type="text" name="name" placeholder="Email">             
              <input id="password_signup_field" type="password" name="password" placeholder="Password">
            </div>
            <div class="column-row" style="margin-top: 0px;">   
              <input id="phone_field" type="text" name="name" placeholder="Phone">
              <input class="textbox-n" id="dob_field" type="text" name="name" placeholder="Date of Birth"  onfocus="(this.type='date')"> 
            </div>
            <div class="column-row" style="margin-top: 0px;">                  
                <select id="gender_options" placeholder="Gender" name="Gender">
                    <option value="" disabled="" selected="">Gender</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Female">Non-binary</option>
                    <option value="Female">Prefere  not to say</option>
                </select>
                <input id="graduation_year_field" type="number" name="name" placeholder="Graduation Year">
            </div>
            <div class="column-row" style="margin-top: 0px;">
                <select id="faculty_options" placeholder="Faculty" name="faculty">
                    <option value="" disabled="" selected="">Background</option>
                </select>                       
                <select id="campus_options" placeholder="Campus" name="campus">
                    <option value="" disabled="" selected="">Campus</option>
                </select>
            </div>
            <div class="column-row" style="margin-top: 0px;">
                <select
                      id="referral_options"
                      placeholder="Referral"
                      name="referral"
                    >
                      <option value="" disabled="" selected="">Referral</option>
                    </select>
                <select id="apply_reasons_options" placeholder="Campus" name="reason">
                    <option value="" disabled="" selected="">Top reason for you to apply</option>
                    <option value="Want to Volunteer/Intern abroad">Want to Volunteer/Intern abroad</option>
                    <option value="Want to develop my leadership">Want to develop my leadership</option>
                    <option value="Want to meet new people and cultures">Want to meet new people and cultures</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="column-row" style="margin-top: 0px;">           
              <select id="prevent_reasons_options" placeholder="top reason that might prevent you from going on exchange" name="referral">
                  <option value="" disabled="" selected="">Top reason that might prevent you from going on exchange</option>
                  <option value="Parent Issues">Parent Issues</option>
                  <option value="Too Expensive">Too Expensive</option>
                  <option value="Can not See any benefit from going on exchange">Can not See any benefit from going on exchange</option>
                  <option value="I am not certain about AIESEC">I am not certain about AIESEC</option>
                  <option value="Can't find relevant time to travel">Can't find relevant time to travel</option>
                </select>
              <span class="gv-form-button-span"><button id="signupbutton" class="button-secondary" onclick="validate_form();">Submit</button></span>
            </div>
					</form>
          <div id="form_msg" style="display: none; border: 4px; justify-content: center;">
                <span id="sign_up_error_msg" style="    color: white;
    order: 2;
    font-size: 20px;"></span>
          </div>
      </section>

  

      <section class="faq">
        <div class="container">
          <h2>Frequently<br />Asked<br />Questions</h2>
          <div class="accordion">
            <div class="accordion-item">
              <button id="accordion-button-1" aria-expanded="false">
                <span class="accordion-title">How do I get selected to a country to intern abroad? Can I select it by myself for any country?</span
                ><span class="icon" aria-hidden="true"></span>
              </button>
              <div class="accordion-content">
                <p>
                  You can decide the country depending on the availability of opportunities/projects. However, it’s always better to talk with your AIESEC contact person in Italy after signing up.
                </p>
              </div>
            </div>
            <div class="accordion-item">
              <button id="accordion-button-2" aria-expanded="false">
                <span class="accordion-title">Am I getting paid?</span
                ><span class="icon" aria-hidden="true"></span>
              </button>
              <div class="accordion-content">
                <p>
                  Yes. A salary is provided in these opportunities and it varies.
                </p>
              </div>
            </div>
            <div class="accordion-item">
              <button id="accordion-button-3" aria-expanded="false">
                <span class="accordion-title"
                  >What is the selection process for the these opportunities?</span
                ><span class="icon" aria-hidden="true"></span>
              </button>
              <div class="accordion-content">
                <p>
                  You will be contacted by a local AIESEC member who will do an initial screening before you start applying and there exists an interviewing procedure with the host country. You will be assisted throughout these interviewing processes therefore nothing’s there to be worried about.
                </p>
              </div>
            </div>
            <div class="accordion-item">
              <button id="accordion-button-4" aria-expanded="false">
                <span class="accordion-title"
                  >Is food and accommodation provided in projects</span
                ><span class="icon" aria-hidden="true"></span>
              </button>
              <div class="accordion-content">
                <p>
                  Food and accomodation is provided in most of the opportunities, however if not, the subsidy or overall cost is mentioned. It is mentioned in each opportunity.
                </p>
              </div>
            </div>
            <div class="accordion-item">
              <button id="accordion-button-5" aria-expanded="false">
                <span class="accordion-title">Do you provide assistance in Visa and travel</span
                ><span class="icon" aria-hidden="true"></span>
              </button>
              <div class="accordion-content">
                <p>
                  Yes we do
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
     
    </main>
    <div class="mobile-nav" style="display: none;">
    <div class="nav-blocker"></div>
    <div class="nav-content">    
      <a style="  display: flex;justify-content: center;" href="/"><img class="logo" src="assets/img/White-Blue-Logo.png" alt=""></a>
      <ul>
        <li style="margin-top: 19px;">
          <a style="text-decoration: none;color: white;;text-transform: uppercase;font-weight: 700;font-size: 22px;" href="/">Home</a>
        </li>
        <li>
          <div class="programs-list" >
            <div style="padding: 0; font-size: 22px;color: white;" id="dropdown-head-mob" class="dropdown-head" href="">Our Programs</div>
            <div class="dropdown" >
              <ul id="mob-dropdown" style="color: white;background: transparent;padding: 14px;border-bottom-left-radius: 15px;border-bottom-right-radius: 15px;position: absolute;top: 27px;width: 100%;display:block"  class="dropdown-list-mob">
                <li><a href="global_volunteer.html">Volunteer Abroad</a></li>
                <li><a href="global_talent.html">Intern Abroad</a></li>
                <li><a href="global_teacher.html">Teach Abroad</a></li>
              </ul>
              <div class="list-cover" style="transform: translateY(1px)"></div>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
    <footer>
      <div class="footer-main container">
        <div class="playlist container">
          <p>CATCH<br>THE VIBE</p>
          <img src="assets/img/music_wave.png" alt="">
          <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/61PysRhgaqpRwisEuO6TCb?utm_source=generator&theme=0" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
        </div>
        <div class="footer-desciption">
          <div class="footer-aiesec">
            <img src="assets/img/aiesec_black.png" alt="">
            <p>AIESEC International Inc. is registered as a Not-for-profit Organization under the Canadian Not-for-profit Corporations Act-2018-02-08, Corporation Number 1055154-and Quebec Business Number (NEQ) 457178 in Montreal, Quebec, Canada.

</p>
          </div>
          <div class="footer-links">
            <p>Products</p>
            <ul>
              <li><a href="">Global Volunteer</a></li>
              <li><a href="">Global Talent</a></li>
              <li><a href="">Global Teacher</a></li>
              <li><a href="">AIESEC Member</a></li>
            </ul>
          </div>
          <div class="footer-contacts">
            <p>Contact us</p>
            <ul>
              <li><a href="tel:+39 351 805 0883">+39 351 805 0883</a></li>
              <li><a href="mailto:contattaci@aiesec.it">contattaci@aiesec.it</a></li>
              <li><a href="https://goo.gl/maps/Vy7xwhYb3RM2">AIESEC Italy | Via Saverio Altamura, 14, 20148, Milan – MI</a></li>
            </ul>
          </div>
        </div>
      </div>
       <div class="moving-aiesec">
          <div class="aiesec-tape">
            <marquee behavior="scroll" direction="left" scrollamount="10">AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC  AIESEC </marquee>
          </div>
          <div class="made-by">
            <p style=color:white>
              Made with ❤️ in Italy, Powered by AIESEC,<br/>
              Developed by <a class=omar href=https://www.linkedin.com/in/omar-rwiheb-698a761b9/>Omar Rwiheb</a>
            </p>
          </div>
      </div>

      
    </footer>
    <script async src="//www.instagram.com/embed.js"></script>
    <script src="assets/js/script.js"></script>
    <script src="assets/vendors/jquery/jquery.min.js"></script>
    <script src="assets/vendors/odometer/odometer.min.js"></script>
    <script>
      document.addEventListener("scroll", function() {
          const targetSection = document.getElementById('gv-signup');
          const rect = targetSection.getBoundingClientRect();
          const originalBackgroundColor = '#252525'; // Original background color of the body

          if (rect.top <= 175 && rect.bottom >= window.innerHeight - 250) {
              // Target section is fully visible
              const bgColor = targetSection.getAttribute('data-bg-color');
              document.body.style.backgroundColor = bgColor;
          } else {
              // Target section is not fully visible
              document.body.style.backgroundColor = originalBackgroundColor;
          }
      });
      // Check if there are any elements with the class "odometer"
      if (document.querySelectorAll(".odometer").length) {
        // Get all elements with the class "odometer"
        var odoElements = document.querySelectorAll(".odometer");

        // Function to check if an element is in the viewport
        function isInViewport(element) {
          var rect = element.getBoundingClientRect();
          return (
            rect.top >= 0 &&
            rect.left >= 0 &&
            rect.bottom <=
              (window.innerHeight || document.documentElement.clientHeight) &&
            rect.right <=
              (window.innerWidth || document.documentElement.clientWidth)
          );
        }

        // Iterate over each odometer element
        odoElements.forEach(function (element) {
          // Function to update the odometer count when it appears in the viewport
          function updateOdometer() {
            if (isInViewport(element)) {
              var countNumber = element.getAttribute("data-count");
              element.innerHTML = countNumber;
              window.removeEventListener("scroll", updateOdometer);
            }
          }

          // Add scroll event listener to update the odometer when it appears in the viewport
          window.addEventListener("scroll", updateOdometer);

          // Initial check in case the element is already in the viewport
          updateOdometer();
        });
      }
      const items = document.querySelectorAll(".accordion button");

      function toggleAccordion() {
        const itemToggle = this.getAttribute("aria-expanded");

        for (i = 0; i < items.length; i++) {
          items[i].setAttribute("aria-expanded", "false");
        }

        if (itemToggle == "false") {
          this.setAttribute("aria-expanded", "true");
        }
      }

      items.forEach((item) => item.addEventListener("click", toggleAccordion));

      // Get all testimonial cards
      const testimonialCards = document.querySelectorAll(".testimonial-card");

      // Function to handle the click event
      function handleCardClick(event) {
        // First, unset the z-index for all cards
        testimonialCards.forEach((card) => {
          card.style.zIndex = ""; // Unset z-index by setting it to an empty string
        });

        // Set the z-index of the clicked card to 1
        event.currentTarget.style.zIndex = "1";
      }

      // Add click event listeners to all testimonial cards
      testimonialCards.forEach((card) => {
        card.addEventListener("click", handleCardClick);
      });
      document.addEventListener('DOMContentLoaded', function() {
    const photos = document.querySelectorAll('.photo');
    photos.forEach(photo => {
        // Generate a random angle between -10 and 10 degrees
        const randomAngle = Math.floor(Math.random() * 21) - 10;
        // Set the custom property for the rotation angle
        photo.style.setProperty('--rotation-angle', randomAngle + 'deg');
    });
});
    </script>
    <script>
      var endpoint = "https://cortex.aiesec.it"
let campaign_id = null;


function isNumeric(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}

function validate_signup(data){
    console.log(data)
    $('#ogx_signup_form *').prop("disabled", false);
    if(data['data']['createOgxLead'] != null){
        window.location.href = '/thankyou_gte.html';
    }
    // Show the user that he Applied! Congrats!
}


let ref;

function calculate_age(dob) { 
          var diff_ms = Date.now() - dob.getTime();
          var age_dt = new Date(diff_ms); 

          return Math.abs(age_dt.getUTCFullYear() - 1970);
      }

function signup_request(){
    console.log(ref)
    var campus_options = document.getElementById('campus_options')
    var campus = campus_options.options[campus_options.selectedIndex].value;
    console.log(campus)
    var faculty_options = document.getElementById('faculty_options')
    var faculty = faculty_options.options[faculty_options.selectedIndex].value;
    console.log(faculty)
    
    var referral_options = document.getElementById('referral_options')
    var referral = referral_options.options[referral_options.selectedIndex].value;

    console.log(referral)
    
    var gender_options = document.getElementById('gender_options')
    var gender = gender_options.options[gender_options.selectedIndex].value;
    console.log(gender)
    
    var reason_to_apply_options = document.getElementById('apply_reasons_options')
    var reason_to_apply = reason_to_apply_options.options[reason_to_apply_options.selectedIndex].value;
    console.log(reason_to_apply)
    
    var reason_to_prevent_options = document.getElementById('prevent_reasons_options')
    var reason_to_prevent = reason_to_prevent_options.options[reason_to_prevent_options.selectedIndex].value;

    console.log(reason_to_prevent)
    
    var query = ` mutation CreatePhysicalOgxLead($firstname: String!, $lastname: String!, $email: String!, $password: String!, $phone: String!, $campus: ID!, $faculty: ID!, $referral: ID!,$dob: Date!, $ogxBranch: Int!, $graduationYear: Int!, $gender: String!, $apply_reason: String!, $prevent_resaon: String!) {
    createOgxLead(firstName:$firstname,lastName:$lastname,email:$email,password:$password,phone:$phone,campus:$campus,faculty:$faculty,referral:$referral,dob:$dob, ogxBranch:$ogxBranch,graduationYear:$graduationYear,  gender:$gender, reasonToApply:$apply_reason, reasonToPrevent:$prevent_resaon)
   {
        applicant {
            id
            firstName
            lastName
            email
            phone
            expaId
            dob
            graduationYear
            gender
            aiesecRepresentative
            createdAt
            reasonToApply
            reasonToPrevent
        }
    }
}`;
console.log(document.getElementById('dob_field').value)

        var variables = { firstname: document.getElementById('first_name_field').value,
                          lastname: document.getElementById('last_name_field').value,
                          email: document.getElementById('email_signup_field').value,
                          password: document.getElementById('password_signup_field').value,
                          phone: document.getElementById('phone_field').value,
                          campus: campus,
                          faculty: faculty,
                          referral: referral,
                          dob: document.getElementById('dob_field').value,
                          ogxBranch: 9,
                          graduationYear: parseInt(document.getElementById('graduation_year_field').value),
                          gender: gender,
                          apply_reason:reason_to_apply,
                          prevent_resaon:reason_to_prevent,
                        },
            

        data_ = fetch(endpoint + '/graphql', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json',
          },
          body: JSON.stringify({
            query,
            variables,
          })
        })
          .then(r => r.json())
          .then(data => validate_signup(data))
          .catch(error => console.error('Error:', error));
}


function validate_email(data){
    result = data['data'].checkOgxEmailExists
    console.log(result)
    if (result == false){
        signup_request()
    }
    else{
        var msg = "The email is registered before, please sign in.";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "block";
        $('#ogx_signup_form *').prop("disabled", false);
    }
}

function unique_email(email){
    //document.getElementById('ge_signup_form').style.display = 'none';
    $("#ogx_signup_form *").attr("disabled", "disabled").off('click');
      var query = `query CheckOgxEmailExists($email: String!) {
            checkOgxEmailExists(email:$email)
      }`;
        var variables = { email: email},
            

        data_ = fetch(endpoint + '/graphql', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Accept': 'application/json',
          },
          body: JSON.stringify({
            query,
            variables,
          })
        })
          .then(r => r.json())
          .then(data => validate_email(data));
    
}

function validate_form(){
    // Validate form inputs here first before calling !
    document.getElementById('form_msg').style.display = "none";
    var upperCase= new RegExp('[A-Z]');
    var lowerCase= new RegExp('[a-z]');
    var numbers = new RegExp('[0-9]');
    var firstname = document.getElementById('first_name_field').value;
    var lastname = document.getElementById('last_name_field').value;
    var email = document.getElementById('email_signup_field').value;
    var password = document.getElementById('password_signup_field').value;
    var phone = document.getElementById('phone_field').value;         
    var dob = document.getElementById('dob_field').value;
    var graduation_year = document.getElementById('graduation_year_field').value;
    var campus_options = document.getElementById('campus_options')
    var campus = campus_options.options[campus_options.selectedIndex].value;
    
    var faculty_options = document.getElementById('faculty_options')
    var faculty = faculty_options.options[faculty_options.selectedIndex].value;
    
    var referral_options = document.getElementById('referral_options')
    var referral = referral_options.options[referral_options.selectedIndex].value;
    
    var gender_options = document.getElementById('gender_options')
    var gender = gender_options.options[gender_options.selectedIndex].value;
    if (firstname.length <= 0) {
        var msg = "Error: Please Enter Your First Name";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
      }
    if (lastname.length <= 0) {
        var msg = "Error: Please Enter Your Last Name";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
      }
    if (email.length < 4) {
        var msg = "Error: Please Enter a valid email.";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
      }
    if (email.includes(' ')){
        var msg = "Error: Please Remove Spaces from your email!";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
    }
    if (!email.includes('@') || !email.includes('.')){
        var msg = "Error: Please enter a valid email!";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
    }
    if (password.length <= 8) {
        var msg = "Error: Your password must be more than 8 characters";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
      }
    
    var numeric = false;
    var upperCase = false;
    var lowerCase = false;
    var i=0;
    var character='';
    var specials = ['"', '!', '"', '#', '$', '%', '&', '(', ')', '*', '+', ',', '-', '.', '/', ':', ';', '<', '=', '>', '?', '@', '[', "'\'", ']', '^', '_', '`', '{', '|', '}', '~' , '"']
    while (i < password.length){
        character = password.charAt(i);
        if (character != ' '){
            if (isNumeric(character)){
            numeric = true;
            }
            else{
                if (!specials.includes(character)){
                    if (character == character.toUpperCase()) {
                        upperCase = true;
                    }
                    if (character == character.toLowerCase()){
                        lowerCase = true;
                    }
                }
            }
        }
        
        i++;
    }
    if ( !numeric || !upperCase || !lowerCase ){
        var msg = "Error: Your password must contain a mixture of upper and lower case letters and at least one number";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ; 
    }
    if (phone.length < 10) {
              var msg = "Error: Please enter a valid phone number.";
              document.getElementById('sign_up_error_msg').innerHTML = msg;
              document.getElementById('form_msg').style.display = "flex";
              return ;
            }
    if (dob.length <= 6) {
        var msg = "Error: Please enter a valid date of birth.";
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
      }
    if (calculate_age(new Date(document.getElementById('dob_field').value)) > 30 || calculate_age(new Date(document.getElementById('dob_field').value)) < 18 ){
        var msg = "Error: You need to be between the age of 18 and 30 to apply."
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
    }
    if (graduation_year.length != 4) {
        var msg = "Error: Please enter a valid graduation year."
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
      }
    if (campus == ""){
        var msg = "Error: Please choose your University"
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
    }
    if (faculty == ""){
        var msg = "Error: Please choose your Faculty"
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
    }
    if (gender == ""){
        var msg = "Error: Please choose your Gender"
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
    }
    if (referral == ""){
        var msg = "Error: Please choose your Referral"
        document.getElementById('sign_up_error_msg').innerHTML = msg;
        document.getElementById('form_msg').style.display = "flex";
        return ;
    }
    unique_email(email);
    
}

function inject_campuses(data){
    var campuses = data
    campuses.forEach(function(element) {
        var $log = $( "#campus_options" ),
        str = '<option value="' + element['node'].id + '">' + element['node'].name + '</option>',
        html = $.parseHTML( str ),
        nodeNames = [];
        $log.append( html );
    });
  }
       
function inject_faculties(data){
    var faculties = data['data']['allFaculties']['edges'];
    faculties.forEach(function(element) {
        var $log = $( "#faculty_options" ),
        str = '<option value="' + element['node'].id + '">' + element['node'].name + '</option>',
        html = $.parseHTML( str ),
        nodeNames = [];
        $log.append( html );
    });
}

async function fetch_campuses() {
  let allCampuses = [];
  let hasNextPage = true;
  let endCursor = null;

  while (hasNextPage) {
    let query = `
      query MyQuery($cursor: String) {
        allCampuses(first: 100, after: $cursor) {
          edges {
            node {
              id
              name
              alignmentId
            }
          }
          pageInfo {
            endCursor
            hasNextPage
          }
        }
      }
    `;

    let response = await fetch(endpoint + '/graphql', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json',
      },
      body: JSON.stringify({
        query,
        variables: { cursor: endCursor }
      })
    });

    let data = await response.json();

    // Add the current page of campuses to the array
    allCampuses = allCampuses.concat(data.data.allCampuses.edges);

    // Update pagination variables
    hasNextPage = data.data.allCampuses.pageInfo.hasNextPage;
    endCursor = data.data.allCampuses.pageInfo.endCursor;
  }
  console.log(allCampuses)

  // Process all campuses at once after fetching all pages
  inject_campuses(allCampuses);
}
function fetch_faculties(){
    var query = `query Myquery {
      allFaculties
      {
        edges
        {
          node
          {
            id
            name
          }
        }
      }
    }`;

    data_ = fetch(endpoint + '/graphql', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json',
      },
      body: JSON.stringify({
        query,
      })
    })
      .then(r => r.json())
      .then(data => inject_faculties(data));
    //console.log(data_);
}

function inject_campaign(data){
    var now = new Date();
  now.setHours(0,0,0,0);
  ref = data['data']['getCampaign']['campaignSource'][0]['id'];
  console.log(ref)
  expiry_date = data['data']['getCampaign']['endDate'];
    start_date = data['data']['getCampaign']['startDate'];
    var CurrentDate = new Date();
    expiry_date = new Date(expiry_date);
    start_date = new Date(start_date);

    if(expiry_date < CurrentDate){
        window.location.href = '/index.html';
    }
    if(CurrentDate < start_date){
        window.location.href = '/index.html';
    }
    var campuses = data['data']['getCampaign']['campuses'];
    console.log(campuses)
    campuses.forEach(function(element) {
      console.log(element)
        var $log = $( "#campus_options" ),
        str = '<option value="' + element.id + '">' + element.name + '</option>',
        html = $.parseHTML( str ),
        nodeNames = [];
        $log.append( html );
    });
    // var products = data['data']['getCampaign']['products'];
    products.forEach(function(element) {
      console.log(element.expaId);
        var $log = $( "#product_options" ),
        str = '<option value="' + element.expaId + '">' + element.name + '</option>',
        html = $.parseHTML( str ),
        nodeNames = [];
        $log.append( html );
    });
}
function fetch_campaign(campaign_id){
    var query = `query Myquery($id: ID!) {
      getCampaign(id:$id)
      {
        id
        title
        startDate
        endDate
        campuses
        {
          id
          name
        }
        campaignSource {
            id
            name
            formValue
        }
        products
        {
          id
          expaId
          name
        }
      }
    }`;
    
    var variables = { id: campaign_id},

    data_ = fetch(endpoint + '/graphql', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json',
      },
      body: JSON.stringify({
        query,
        variables,
      })
    })
      .then(r => r.json())
      .then(data => inject_campaign(data));
    //console.log(data_);
}

function inject_referrals(data) {
        var referrals = data["data"]["allReferrals"]["edges"];
        referrals.forEach(function (element) {
          var $log = $("#referral_options"),
            str =
              '<option value="' +
              element["node"].id +
              '">' +
              element["node"].formValue +
              "</option>",
            html = $.parseHTML(str),
            nodeNames = [];
          $log.append(html);
        });
      }

function fetch_referrals() {
        var query = `query Myquery {
             allReferrals
              {
                edges
                {
                  node
                  {
                    id
                    formValue
                  }
                }
              }
            }`;

        data_ = fetch(endpoint + "/graphql", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Accept: "application/json",
          },
          body: JSON.stringify({
            query,
          }),
        })
          .then((r) => r.json())
          .then((data) => inject_referrals(data));
        //console.log(data_);
      }

function main(){
    fetch_referrals();
    fetch_faculties();
    fetch_campuses();
}

window.onload = main;
    </script>
  </body>
</html>
